<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="/template/_template.xhtml">
    <ui:define name="title">AHA ::: Car Profile :::</ui:define>
    <ui:define name="content">
        <h:form id="form">
            <p:growl id="messages" for="controllerMessages">
                <p:autoUpdate/>
            </p:growl>
            <p:commandButton value="Back to Car Profile Management" action="#{offerController.backToCarProfilesManagement}" process="@this"/>
            <p:panel header="#{offerController.offer.id==null ? 'New Offer Registration' :'Edit Offer Information'}"
                style="width: 50%;margin: auto">
                <h:panelGrid columns="3">
                    <p:outputLabel value="Description:" for="description"/>
                    <p:inputText id="description" value="#{offerController.offer.description}" required="true" requiredMessage="Required"/>
                    <p:message for="description"/>

                    <p:outputLabel value="Price:" for="price"/>
                    <p:inputNumber id="price" value="#{offerController.offer.price}" required="true" requiredMessage="Required" symbol="$"/>
                    <p:message for="price"/>

                    <p:outputLabel value="Discount:" for="discount"/>
                    <p:inputText id="discount" value="#{offerController.offer.discount}" required="true" requiredMessage="Required"/>
                    <p:message for="discount"/>

                    <p:outputLabel value="Start Date:" for="startDate"/>
                    <p:calendar id="startDate" value="#{offerController.offer.startDate}" converter="localDateConverter" pattern="MM/dd/yyyy"/>
                    <p:message for="startDate"/>

                    <p:outputLabel value="End Date:" for="endDate"/>
                    <p:calendar id="endDate" value="#{offerController.offer.endDate}" converter="localDateConverter" pattern="MM/dd/yyyy"/>
                    <p:message for="endDate"/>

                    <p:commandButton value="Save" icon="fa fa-save" action="#{offerController.save}" update="form"
                                     actionListener="#{offerController.preSave}"/>



                </h:panelGrid>

            </p:panel>
            <p:dataTable id="offersList" value="#{offerController.offers}" var="offer" paginator="true" rows="5" style="width: 50%;margin: auto">
                <f:facet name="header">List of Offers</f:facet>
                <p:column headerText="Registration Number">
                    <p:outputLabel value="#{offer.id}"/>
                </p:column>
                <p:column headerText="Description">
                    <p:outputLabel value="#{offer.description}"/>
                </p:column>
                <p:column headerText="Price">
                    <p:outputLabel value="#{offer.price}"/>
                </p:column>
                <p:column headerText="Discount">
                    <p:outputLabel value="#{offer.discount}"/>
                </p:column>

                <p:column headerText="Start Date:">
                    <h:outputText value="#{offer.startDate}">
                        <!--<f:convertDateTime pattern="MM/dd/yyyy"/>-->
                    </h:outputText>
                </p:column>

                <p:column headerText="End Date:">
                    <p:outputLabel value="#{offer.endDate}"/>
                </p:column>


                <p:column headerText="Action">
                    <p:commandButton value="Edit" icon="fa fa-edit" process="@this" update="form" action="#{offerController.select(offer.id)}"/>
                    <p:commandButton value="Delete" icon="fa fa-trash" process="@this" update="offersList" action="#{offerController.delete(offer.id)}">
                        <p:confirm header="Confirmation"
                                   message="Are you sure about deleting Offer with #{offer.id} registration number?"
                                   icon="ui-icon-alert"/>
                    </p:commandButton>
                    <p:commandButton value="Desactive"/>
                </p:column>
            </p:dataTable>

        </h:form>
    </ui:define>
</ui:composition>
</html>